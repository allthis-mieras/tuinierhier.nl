---
// ServicesAnimation component - handles services section animations
---

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  // Register ScrollTrigger
  gsap.registerPlugin(ScrollTrigger);

  // Check for reduced motion preference
  const prefersReducedMotion = window.matchMedia(
    "(prefers-reduced-motion: reduce)"
  ).matches;

  if (!prefersReducedMotion && window.innerWidth >= 1024) {
    // Darken effect for sticky section
    const servicesSection = document.getElementById("services-section");
    if (servicesSection) {
      // Create overlay element
      const overlay = document.createElement("div");
      overlay.style.cssText = `
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.25);
        opacity: 0;
        pointer-events: none;
        z-index: 1;
        border-radius: inherit;
      `;
      servicesSection.appendChild(overlay);

      // Animate overlay opacity on scroll
      gsap.to(overlay, {
        opacity: 1,
        ease: "none",
        scrollTrigger: {
          trigger: servicesSection,
          start: "top center",
          end: "bottom center",
          scrub: 1,
        },
      });
    }
  }
</script>
